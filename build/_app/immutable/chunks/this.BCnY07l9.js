import{e as N,h,f as b,E as R,H as g,g as o,j as q,k as d,m as T,o as E,p as A,q as v,U as L,t as x,v as D,d as F,w as H,S as O}from"./utils.CkWlHS57.js";function Y(a,r,e=!1){h&&b();var i=a,f=null,s=null,c=L,k=e?R:0,l=!1;const y=(n,t=!0)=>{l=!0,u(t,n)},u=(n,t)=>{if(c===(c=n))return;let _=!1;if(h){const I=i.data===g;!!c===I&&(i=o(),q(i),d(!1),_=!0)}c?(f?T(f):t&&(f=E(()=>t(i))),s&&A(s,()=>{s=null})):(s?T(s):t&&(s=E(()=>t(i))),f&&A(f,()=>{f=null})),_&&d(!0)};N(()=>{l=!1,r(y),l||u(null,null)},k),h&&(i=v)}function S(a,r){return a===r||(a==null?void 0:a[O])===r}function j(a={},r,e,i){return x(()=>{var f,s;return D(()=>{f=s,s=[],F(()=>{a!==e(...s)&&(r(a,...s),f&&S(e(...f),a)&&r(null,...f))})}),()=>{H(()=>{s&&S(e(...s),a)&&r(null,...s)})}}),a}export{j as b,Y as i};
